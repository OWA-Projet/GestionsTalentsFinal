<div class="form-container">
  <h2>{{ isEdit ? 'Modifier une offre' : 'Ajouter une offre' }}</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <div class="form-group">
      <label>Libellé</label>
      <input formControlName="libelle" placeholder="Titre du poste"
             [class.invalid]="form.get('libelle')?.invalid && form.get('libelle')?.touched"/>
      <div class="error" *ngIf="form.get('libelle')?.invalid && form.get('libelle')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea formControlName="description" placeholder="Description du poste"></textarea>
    </div>

    <div class="form-group">
      <label>Métier proposé</label>
      <input formControlName="metier_propose" placeholder="Intitulé du métier"
             [class.invalid]="form.get('metier_propose')?.invalid && form.get('metier_propose')?.touched"/>
      <div class="error" *ngIf="form.get('metier_propose')?.invalid && form.get('metier_propose')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Secteur d'activité</label>
      <input formControlName="secteur_activite" placeholder="Secteur d'activité"
             [class.invalid]="form.get('secteur_activite')?.invalid && form.get('secteur_activite')?.touched"/>
      <div class="error" *ngIf="form.get('secteur_activite')?.invalid && form.get('secteur_activite')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Expérience requise</label>
      <input formControlName="Experience_requise" placeholder="Expérience requise"
             [class.invalid]="form.get('Experience_requise')?.invalid && form.get('Experience_requise')?.touched"/>
      <div class="error" *ngIf="form.get('Experience_requise')?.invalid && form.get('Experience_requise')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Niveau d'étude</label>
      <input formControlName="niveau_etude" placeholder="Niveau d'étude"
             [class.invalid]="form.get('niveau_etude')?.invalid && form.get('niveau_etude')?.touched"/>
      <div class="error" *ngIf="form.get('niveau_etude')?.invalid && form.get('niveau_etude')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Type de contrat</label>
      <input formControlName="type_contrat" placeholder="Type de contrat"
             [class.invalid]="form.get('type_contrat')?.invalid && form.get('type_contrat')?.touched"/>
      <div class="error" *ngIf="form.get('type_contrat')?.invalid && form.get('type_contrat')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Date publication</label>
      <input type="date" formControlName="date_publication"
             [class.invalid]="form.get('date_publication')?.invalid && form.get('date_publication')?.touched"/>
      <div class="error" *ngIf="form.get('date_publication')?.invalid && form.get('date_publication')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Date expiration</label>
      <input type="date" formControlName="date_expiration"
             [class.invalid]="form.get('date_expiration')?.invalid && form.get('date_expiration')?.touched"/>
      <div class="error" *ngIf="form.get('date_expiration')?.invalid && form.get('date_expiration')?.touched">Ce champ est requis.</div>
    </div>

    <div class="form-group">
      <label>Profil recherché</label>
      <textarea formControlName="profil_recherche" placeholder="Profil recherché"></textarea>
    </div>

    <div class="form-group">
      
      <div class="entreprise-label">
        {{ entreprisename}}
      </div>
    </div>

    <button type="submit" [disabled]="form.invalid || (loading$ | async)">
      {{ isEdit ? 'Enregistrer les modifications' : 'Ajouter l\'offre' }}
    </button>
    
    <!-- <button type="button" (click)="router.navigate(['/admin/offres'])" class="btn-cancel">Annuler</button> -->
  </form>

  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="loading$ | async" class="loading">Chargement...</div>

</div>
